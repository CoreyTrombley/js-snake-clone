{"version":3,"sources":["webpack:///webpack/bootstrap 6848b0e47d6d74429eca","webpack:///./src/main.js","webpack:///./src/renders.js"],"names":["startTime","fps","now","then","Date","interval","delta","score","level","speed","SIZE","GRID","eatFood","Audio","board","document","getElementById","height","width","style","ctx","getContext","scale","newDirection","direction","snakeLength","snake","x","y","food","end","paused","started","randomOffset","Math","floor","random","stringCoords","obj","did_eat_food","play","window","onkeydown","e","keyCode","requestAnimationFrame","draw","renders","preventDefault","location","reload","timestamp","getTime","currentHead","abs","axis","unshift","slice","fillStyle","snakeObj","i","length","a","fillRect","onload","drawBoard","drawScore","font","textAlign","fillText","drawFood","drawLevel","drawPause","drawStart","drawEnd"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6848b0e47d6d74429eca","import * as renders from './renders';\n\n// animation fps setup\nlet startTime;\nlet fps = 10;\nlet now;\nlet then = Date.now();\nlet interval = 1000 / fps;\nlet delta;\n\n// Score Level Setup\nlet score = 0;\nlet level = 1;\nlet speed = 0;\n// board set up\nconst SIZE = 500;\nconst GRID = SIZE / 50;\n\nconst eatFood = new Audio('./eat.mp3'); // buffers automatically when created\n\nconst board = document.getElementById('board');\nboard.height = board.width = SIZE * 2;\nboard.style.width = board.style.height = SIZE + 'px';\n\nconst ctx = board.getContext('2d');\nctx.scale(2, 2);\n\n// setup snake\nlet newDirection = 1\nlet direction = 1;\nlet snakeLength = 5;\nlet snake = [{x: SIZE / 2, y: SIZE / 2}];\nlet food = null;\nlet end = false;\nlet paused = false;\nlet started = false;\n\n// helper functions\nconst randomOffset = () => {\n  return Math.floor(Math.random() * SIZE / GRID) * GRID;\n}\n\nconst stringCoords = (obj) => {\n  return `${obj.x},${obj.y}`;\n}\n\n// checks\nconst did_eat_food = (food, snake) => {\n  if (food && food.x === snake.x && food.y === snake.y) {\n    eatFood.play();\n    food = null;\n    score += 1;\n    snakeLength += 5;\n\n    if (score % 2 === 0) {\n      level += 1;\n      speed = level + 2;\n      fps = fps < 60 ? 10 + speed : 60;\n      interval = 1000 / fps;\n    }\n  }\n}\n\nwindow.onkeydown = (e) => {\n  // pause\n  if (e.keyCode === 80) {\n    if (paused === true) {\n      paused = false;\n      window.requestAnimationFrame(draw);\n      return;\n    } else {\n      paused = true;\n      renders.drawPause(ctx);\n      return;\n    }\n  }\n\n  // reset\n  if (e.keyCode === 13 && end === true) {\n    e.preventDefault();\n    document.location.reload(true);\n    return;\n  }\n\n  if (e.keyCode === 13 && started !== true) {\n    started = true;\n    window.requestAnimationFrame(draw);\n    return;\n  }\n\n  // movement\n  newDirection = {37: -1, 38: -2, 39: 1, 40: 2}[e.keyCode] || newDirection;\n};\n\nconst draw = (timestamp) => {\n\n  timestamp = timestamp || new Date().getTime();\n\n  // check if the game is paused\n  if (paused === true) {\n    renders.drawPause(ctx);\n    return;\n  }\n\n  // check if the game has started\n  if (started !== true) {\n    renders.drawBoard(ctx);\n    renders.drawStart(ctx);\n    return;\n  }\n\n  // check if the game has ended\n  if (end === true) {\n    renders.drawEnd(ctx);\n    return;\n  }\n\n  window.requestAnimationFrame(timestamp => draw(timestamp))\n\n  now = Date.now();\n  delta = now - then;\n\n  // manage fps / difficulty\n  if (delta > interval) {\n    then = now - (delta % interval);\n\n    const currentHead = {x: snake[0].x, y: snake[0].y};\n\n    if (Math.abs(direction) !== Math.abs(newDirection)) {\n      direction = newDirection;\n    }\n\n    const axis = Math.abs(direction) === 1 ? 'x' : 'y';\n    if (direction < 0) {\n      currentHead[axis] -= GRID;\n    } else {\n      currentHead[axis] += GRID;\n    }\n\n    did_eat_food(food, currentHead);\n\n    renders.drawBoard(ctx);\n    renders.drawScore(ctx, score);\n    renders.drawLevel(ctx, level);\n\n    if (end) {\n      renders.drawEnd(ctx);\n    } else {\n      snake.unshift(currentHead);\n      snake = snake.slice(0, snakeLength);\n    }\n\n    // Collisions === end game\n    if (currentHead.x < 0 || currentHead.x >= SIZE || currentHead.y < 0 || currentHead.y >= SIZE) {\n       end = true;\n    }\n\n    ctx.fillStyle = '#2db0ed';\n    const snakeObj = {};\n    for (let i = 0; i < snake.length; i++) {\n      let a = snake[i];\n      ctx.fillRect(a.x, a.y, GRID, GRID);\n      if (i > 0) {\n         snakeObj[stringCoords(a)] = true;\n      }\n    }\n\n    if (snakeObj[stringCoords(currentHead)]) {\n       end = true;\n    }\n\n    // make sure we always have food to eat\n    while (!food || snakeObj[stringCoords(food)]) {\n      food = {x: randomOffset(), y: randomOffset()};\n    }\n\n    renders.drawFood(ctx, food);\n  }\n}\n\nwindow.onload = () => {\n  window.requestAnimationFrame(timestamp => {\n    startTime = timestamp || new Date().getTime();\n    draw(startTime);\n  })\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","const SIZE = 500;\nconst GRID = SIZE / 50;\n\nexport const drawBoard = (ctx) => {\n  ctx.fillStyle = '#eee';\n  ctx.fillRect(0, 0, SIZE, SIZE);\n}\n\nexport const drawScore = (ctx, score) => {\n  ctx.font = \"16px Arial\";\n  ctx.fillStyle = \"#444\";\n  ctx.textAlign = 'center';\n  ctx.fillText(`Score: ${score}`, 40, 20);\n}\n\nexport const drawFood = (ctx, food) => {\n  ctx.fillStyle = '#ff005e';\n  ctx.fillRect(food.x, food.y, GRID, GRID);\n}\n\nexport const drawLevel = (ctx, level) => {\n  ctx.font = \"16px arial\";\n  ctx.fillStyle = \"#444\";\n  ctx.textAlign = 'center';\n  ctx.fillText(`Level: ${level}`, 38, 40);\n}\n\nexport const drawPause = (ctx) => {\n  ctx.fillStyle = '#444';\n  ctx.font = '40px arial';\n  ctx.textAlign = 'center';\n  ctx.fillText('Paused', SIZE / 2, SIZE / 2);\n}\n\nexport const drawStart = (ctx) => {\n  ctx.fillStyle = '#444';\n  ctx.font = '40px arial';\n  ctx.textAlign = 'center';\n  ctx.fillText('Press enter to start', SIZE / 2, SIZE / 2);\n}\n\nexport const drawEnd = (ctx) => {\n  ctx.fillStyle = '#444';\n  ctx.font = '40px arial';\n  ctx.textAlign = 'center';\n  ctx.fillText('Press enter to restart', SIZE / 2, SIZE / 2);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renders.js"],"sourceRoot":""}